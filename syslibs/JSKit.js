// Generated by CoffeeScript 1.12.6
var JSActivityIndicatorView, JSAlertView, JSButton, JSControl, JSFileManager, JSFont, JSImage, JSImagePicker, JSImageView, JSLabel, JSListView, JSMenuView, JSObject, JSPoint, JSRange, JSRect, JSResponder, JSScrollView, JSSegmentedControl, JSSize, JSSwitch, JSTableView, JSTableViewCell, JSTableViewController, JSTextField, JSTextView, JSUserCookies, JSUserDefaults, JSView, JSWebView, JSWindow,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

JSObject = (function() {
  function JSObject() {
    this._self = this;
    this._objectID = UniqueID();
  }

  return JSObject;

})();

JSFileManager = (function(superClass) {
  var escapeRules;

  extend(JSFileManager, superClass);

  function JSFileManager() {
    JSFileManager.__super__.constructor.call(this);
  }

  JSFileManager.prototype.escapeHTML = function(s) {
    return s.replace(/[&"<>]/g, function(c) {
      return escapeRules[c];
    });
  };

  escapeRules = {
    "&": "&amp;",
    "\"": "&quot;",
    "<": "&lt;",
    ">": "&gt;"
  };

  JSFileManager.prototype.stringWithContentsOfFile = function(fname, readaction) {
    this.readaction = readaction;
    if (fname == null) {
      return;
    }
    return $.post("syslibs/library.php", {
      mode: "stringWithContentsOfFile",
      fname: fname
    }, (function(_this) {
      return function(data) {
        if ((_this.readaction != null)) {
          return _this.readaction(data);
        }
      };
    })(this));
  };

  JSFileManager.prototype.writeToFile = function(path, string, saveaction) {
    this.saveaction = saveaction;
    return $.post("syslibs/library.php", {
      mode: "writeToFile",
      fname: path,
      data: string
    }, (function(_this) {
      return function(ret) {
        if ((_this.saveaction != null)) {
          return _this.saveaction(parseInt(ret));
        }
      };
    })(this));
  };

  JSFileManager.prototype.fileList = function(path, type, listaction) {
    this.listaction = listaction;
    return $.post("syslibs/library.php", {
      mode: "filelist",
      path: path,
      filter: type
    }, (function(_this) {
      return function(filelist) {
        if ((_this.listaction != null)) {
          return _this.listaction(filelist);
        }
      };
    })(this));
  };

  JSFileManager.prototype.thumbnailList = function(path, imagelistaction) {
    this.imagelistaction = imagelistaction;
    return $.post("syslibs/library.php", {
      mode: "thumbnailList",
      path: path
    }, (function(_this) {
      return function(filelist) {
        if ((_this.imagelistaction != null)) {
          return _this.imagelistaction(filelist);
        }
      };
    })(this));
  };

  JSFileManager.prototype.createDirectoryAtPath = function(path, creatediraction) {
    this.creatediraction = creatediraction;
    return $.post("syslibs/library.php", {
      mode: "createDirectoryAtPath",
      path: path
    }, (function(_this) {
      return function(ret) {
        if ((_this.creatediraction != null)) {
          return _this.creatediraction(parseInt(ret));
        }
      };
    })(this));
  };

  JSFileManager.prototype.removeItemAtPath = function(path, removeaction) {
    this.removeaction = removeaction;
    return $.post("syslibs/library.php", {
      mode: "removeFile",
      path: path
    }, (function(_this) {
      return function(ret) {
        if ((_this.removeaction != null)) {
          return _this.removeaction(parseInt(ret));
        }
      };
    })(this));
  };

  JSFileManager.prototype.moveItemAtPath = function(file, path, moveaction) {
    this.moveaction = moveaction;
    return $.post("syslibs/library.php", {
      mode: "moveFile",
      file: file,
      toPath: path
    }, (function(_this) {
      return function(ret) {
        if ((_this.moveaction != null)) {
          return _this.moveaction(parseInt(ret));
        }
      };
    })(this));
  };

  return JSFileManager;

})(JSObject);

JSFont = (function(superClass) {
  extend(JSFont, superClass);

  function JSFont() {
    this._fontSize = 12;
    this._fontWeight = 'normal';
  }

  JSFont.prototype.systemFontOfSize = function(fontsize) {};

  return JSFont;

})(JSObject);


/*
#+(UIFont*)systemFontOfSize:(CGFloat)fontSize   指定されたサイズの標準スタイルのフォントを返す
　UIFont *font = [UIFont systemFontOfSize:20];

#+(UIFont*)boldSystemFontOfSize:(CGFloat)fontSize   指定されたサイズの太字スタイルのフォントを返す
（例）サイズ20の太字フォントを取得する
　UIFont *font = [UIFont boldSystemFontOfSize:20];

#+(UIFont*)italicSystemFontOfSize:(CGFloat)fontSize   指定されたサイズの斜体スタイルのフォントを返す
（例）サイズ20の斜体フォントを取得する
　UIFont *font = [UIFont italicSystemFontOfSize:20];

#+(CGFloat)systemFontSize    標準サイズを返す
（例）UIFont *font =
　　　[UIFont systemFontOfSize:[UIFont systemFontSize]];

#+(CGFloat)smallSystemFontSize   標準サイズよりも小さめのサイズを返す
（例）UIFont *font =[UIFont systemFontOfSize:
　　　　[UIFont smallSystemFontSize]];

#+(CGFloat)labelFontSize     ラベルで使用される標準的なサイズを返す
（例）UIFont *font =
　　　[UIFont systemFontOfSize:[UIFont labelFontSize]];

#+(CGFloat)buttonFontSize+
 */

JSImage = (function(superClass) {
  extend(JSImage, superClass);

  function JSImage(imagename) {
    JSImage.__super__.constructor.call(this);
    if ((imagename != null)) {
      this.imageNamed(imagename);
    }
  }

  JSImage.prototype.imageNamed = function(_imagepath) {
    this._imagepath = _imagepath;
  };

  JSImage.prototype.imageWriteToSavedPicture = function(fname, action) {
    return $.post("syslibs/library.php", {
      mode: "savePicture",
      imagepath: this._imagepath,
      fpath: fname
    }, (function(_this) {
      return function(ret) {
        if ((action != null)) {
          return action(ret);
        }
      };
    })(this));
  };

  return JSImage;

})(JSObject);

JSPoint = (function(superClass) {
  extend(JSPoint, superClass);

  function JSPoint() {
    JSPoint.__super__.constructor.call(this);
    this.x = 0;
    this.y = 0;
  }

  return JSPoint;

})(JSObject);

JSRange = (function(superClass) {
  extend(JSRange, superClass);

  function JSRange() {
    JSRange.__super__.constructor.call(this);
    this.location = 0;
    this.length = 0;
  }

  return JSRange;

})(JSObject);

JSResponder = (function(superClass) {
  extend(JSResponder, superClass);

  function JSResponder() {
    JSResponder.__super__.constructor.call(this);
    this._event = null;
    this._touches = false;
  }

  JSResponder.prototype.didBrowserResize = function() {
    var j, len, o, ref, results;
    ref = this._objlist;
    results = [];
    for (j = 0, len = ref.length; j < len; j++) {
      o = ref[j];
      results.push(o.didBrowserResize());
    }
    return results;
  };

  JSResponder.prototype.locationView = function() {
    var pt;
    pt = new JSPoint();
    pt.x = this._event.offsetX;
    pt.y = this._event.offsetY;
    return pt;
  };

  return JSResponder;

})(JSObject);

JSSize = (function(superClass) {
  extend(JSSize, superClass);

  function JSSize() {
    JSSize.__super__.constructor.call(this);
    this.width = 0;
    this.height = 0;
  }

  return JSSize;

})(JSObject);

JSTableViewController = (function(superClass) {
  extend(JSTableViewController, superClass);

  function JSTableViewController(frame) {
    JSTableViewController.__super__.constructor.call(this);
    this._tableViewStyle = "UITableViewStylePlain";
    this._bgColor = JSColor("white");
    this._tableView = new JSTableView(frame);
    this._tableView.delegate = this._self;
    this._tableView.dataSource = this._self;
  }

  return JSTableViewController;

})(JSObject);

JSUserCookies = (function(superClass) {
  extend(JSUserCookies, superClass);

  function JSUserCookies() {
    JSUserCookies.__super__.constructor.call(this);
  }

  JSUserCookies.prototype.setObject = function(value, forKey) {
    return $.cookie(forKey, encodeURIComponent(value), {
      expires: 365
    });
  };

  JSUserCookies.prototype.stringForKey = function(forKey) {
    var ret;
    ret = decodeURIComponent($.cookie(forKey));
    return ret;
  };

  JSUserCookies.prototype.removeObjectForKey = function(forKey, domain) {
    var path;
    if (domain == null) {
      domain = location.hostname;
    }
    path = "/";
    return $.removeCookie(forKey, {
      path: path,
      domain: domain
    });
  };

  return JSUserCookies;

})(JSObject);

JSUserDefaults = (function(superClass) {
  extend(JSUserDefaults, superClass);

  function JSUserDefaults() {
    JSUserDefaults.__super__.constructor.call(this);
  }

  JSUserDefaults.prototype.setObject = function(value, forKey) {
    return $.post("syslibs/library.php", {
      "mode": "setUserDefaults",
      "forKey": forKey,
      "value": JSON.stringify(value)
    });
  };

  JSUserDefaults.prototype.stringForKey = function(forKey, action) {
    if (action == null) {
      action = void 0;
    }
    return $.post("syslibs/library.php", {
      "mode": "getUserDefaults",
      "forKey": forKey
    }, (function(_this) {
      return function(data) {
        var data2;
        if (data !== "") {
          data2 = JSON.parse(data);
        } else {
          data2 = "";
        }
        if ((action != null)) {
          return action(data2);
        }
      };
    })(this));
  };

  JSUserDefaults.prototype.removeObjectForKey = function(forKey) {
    return $.post("syslibs/library.php", {
      "mode": "removeUserDefaults",
      "forKey": forKey
    });
  };

  return JSUserDefaults;

})(JSObject);

JSView = (function(superClass) {
  extend(JSView, superClass);

  function JSView(_frame) {
    this._frame = _frame != null ? _frame : JSRectMake(0, 0, 320, 240);
    this.animateWithDuration = bind(this.animateWithDuration, this);
    this.addTapGesture = bind(this.addTapGesture, this);
    this.removeFromSuperview = bind(this.removeFromSuperview, this);
    JSView.__super__.constructor.call(this);
    this._parent = null;
    this._viewSelector = "#" + this._objectID;
    this._bgColor = JSColor("#c0c0c0");
    this._alpha = 1.0;
    this._cornerRadius = 0;
    this._borderColor = JSColor("clearColor");
    this._borderWidth = 0;
    this._clipToBounds = false;
    this._draggable = false;
    this._resizable = false;
    this._containment = false;
    this._div = "<div id=\"" + this._objectID + "\" style='position:absolute;z-index:1;'><!--null--></div>";
    this._ignoreDraggable = [];
    this._objlist = new Array();
    this._shadow = false;
    this._userInteractionEnabled = true;
    this._axis = false;
    this._touched = false;
    this._hidden = false;
  }

  JSView.prototype.destructor = function() {};

  JSView.prototype.addSubview = function(object) {
    if (object == null) {
      return;
    }
    this._objlist.push(object);
    object._parent = this._self;
    if (($(this._viewSelector).length)) {
      $(this._viewSelector).append(object._div);
      object.setDraggable(object._draggable, object._axis, object._dragopacity);
      object.setResizable(object._resizable, object._resizeAction, object._resizeopacity);
      return object.viewDidAppear();
    }
  };

  JSView.prototype.setFrame = function(_frame) {
    this._frame = _frame;
    if (($(this._viewSelector).length)) {
      $(this._viewSelector).css("width", this._frame.size.width + "px");
      $(this._viewSelector).css("height", this._frame.size.height + "px");
      $(this._viewSelector).css("left", this._frame.origin.x + "px");
      return $(this._viewSelector).css("top", this._frame.origin.y + "px");
    }
  };

  JSView.prototype.setBackgroundColor = function(_bgColor) {
    this._bgColor = _bgColor;
    if (($(this._viewSelector).length)) {
      return $(this._viewSelector).css("background-color", this._bgColor);
    }
  };

  JSView.prototype.setAlpha = function(_alpha, flag) {
    var b, col, g, r, ret;
    this._alpha = _alpha;
    if (flag == null) {
      flag = false;
    }
    if (this._alpha < 0 || this._alpha > 1) {
      return;
    }
    if (($(this._viewSelector).length)) {
      ret = this._bgColor.match(/^(#)(..)(..)(..)$/);
      if ((ret != null) && ret[1] === "#" && flag) {
        r = String(parseInt(ret[2], 16));
        g = String(parseInt(ret[3], 16));
        b = String(parseInt(ret[4], 16));
        col = 'rgba(' + r + ', ' + g + ', ' + b + ', ' + this._alpha + ')';
        return $(this._viewSelector).css("background-color", col);
      } else {
        return $(this._viewSelector).css("opacity", this._alpha);
      }
    }
  };

  JSView.prototype.setCornerRadius = function(_cornerRadius) {
    this._cornerRadius = _cornerRadius;
    if (($(this._viewSelector).length)) {
      $(this._viewSelector).css("-webkit-border-radius", this._cornerRadius + "px");
      $(this._viewSelector).css("-moz-border-radius", this._cornerRadius + "px");
      return $(this._viewSelector).css("border-radius", this._cornerRadius + "px");
    }
  };

  JSView.prototype.setBorderColor = function(_borderColor) {
    this._borderColor = _borderColor;
    if (($(this._viewSelector).length)) {
      $(this._viewSelector).css("border-color", this._borderColor);
      $(this._viewSelector).css("border-style", "solid");
      return $(this._viewSelector).css("border-width", this._borderWidth);
    }
  };

  JSView.prototype.setBorderWidth = function(_borderWidth) {
    this._borderWidth = _borderWidth;
    $(this._viewSelector).css("border-width", this._borderWidth);
    $(this._viewSelector).css("border-style", "solid");
    return $(this._viewSelector).css("border-width", this._borderWidth);
  };

  JSView.prototype.setClipToBounds = function(_clipToBounds) {
    this._clipToBounds = _clipToBounds;
    if (($(this._viewSelector).length)) {
      if (this._clipToBounds === true) {
        return $(this._viewSelector).css("overflow", "hidden");
      } else {
        return $(this._viewSelector).css("overflow", "normal");
      }
    }
  };

  JSView.prototype.setUserInteractionEnabled = function(_userInteractionEnabled) {
    this._userInteractionEnabled = _userInteractionEnabled;
  };

  JSView.prototype.disableDragObject = function(object) {
    if (($(this._viewSelector).length)) {
      return $(this._viewSelector).draggable('option', 'cancel', object._viewSelector);
    }
  };

  JSView.prototype.setDraggable = function(_draggable, _axis, _dragopacity) {
    var containment;
    this._draggable = _draggable;
    this._axis = _axis != null ? _axis : false;
    this._dragopacity = _dragopacity != null ? _dragopacity : 0.5;
    if ((this._parent != null)) {
      containment = this._parent._containment;
    } else {
      containment = false;
    }
    if (!$(this._viewSelector).length) {
      return;
    }
    if (this._draggable === true) {
      $(this._viewSelector).css("cursor", "pointer");
      if (containment === true) {
        return $(this._viewSelector).draggable({
          containment: "parent",
          axis: this._axis,
          opacity: this._dragopacity,
          disabled: false
        });
      } else {
        $(this._viewSelector).draggable({
          disabled: false
        });
        $(this._viewSelector).draggable("destroy");
        return $(this._viewSelector).draggable({
          opacity: this._dragopacity,
          axis: this._axis,
          disabled: false
        });
      }
    } else {
      $(this._viewSelector).css("cursor", "auto");
      return $(this._viewSelector).draggable({
        disabled: true
      });
    }
  };

  JSView.prototype.setResizable = function(_resizable, _resizeAction, _resizeopacity, minWidth, minHeight, maxWidth, maxHeight) {
    var containment;
    this._resizable = _resizable;
    this._resizeAction = _resizeAction != null ? _resizeAction : null;
    this._resizeopacity = _resizeopacity != null ? _resizeopacity : 0.5;
    if (minWidth == null) {
      minWidth = 0;
    }
    if (minHeight == null) {
      minHeight = 0;
    }
    if (maxWidth == null) {
      maxWidth = 16777216;
    }
    if (maxHeight == null) {
      maxHeight = 16777216;
    }
    if ((this._parent != null)) {
      containment = this._parent._containment;
    } else {
      containment = false;
    }
    if (!$(this._viewSelector).length) {
      return;
    }
    if (this._resizable === true) {
      if (containment === true) {
        return $(this._viewSelector).resizable({
          containment: "parent",
          minWidth: minWidth,
          minHeight: minHeight,
          maxWidth: maxWidth,
          maxHeight: maxHeight,
          resize: (function(_this) {
            return function(event, ui) {
              var frame;
              frame = _this._frame;
              frame.origin.x = $(_this._viewSelector).css("left");
              frame.origin.y = $(_this._viewSelector).css("top");
              frame.size.width = $(_this._viewSelector).width();
              frame.size.height = $(_this._viewSelector).height();
              _this._self.setFrame(frame);
              if ((_this._resizeAction != null)) {
                return _this._resizeAction();
              }
            };
          })(this)
        });
      } else {
        $(this._viewSelector).resizable({
          opacity: this._resizeopacity,
          disabled: false
        });
        $(this._viewSelector).resizable("destroy");
        return $(this._viewSelector).resizable({
          minWidth: minWidth,
          minHeight: minHeight,
          maxWidth: maxWidth,
          maxHeight: maxHeight,
          opacity: this._resizeopacity,
          disabled: false,
          resize: (function(_this) {
            return function(event, ui) {
              var frame;
              frame = _this._self._frame;
              frame.size.width = $(_this._viewSelector).width();
              frame.size.height = $(_this._viewSelector).height();
              _this._self.setFrame(frame);
              return _this._resizeAction();
            };
          })(this)
        });
      }
    }
  };

  JSView.prototype.setHidden = function(_hidden) {
    this._hidden = _hidden;
    if (($(this._viewSelector).length)) {
      if (this._hidden === true) {
        return $(this._viewSelector).css("display", "none");
      } else {
        return $(this._viewSelector).css("display", "inline-block");
      }
    }
  };

  JSView.prototype.setContainment = function(_containment) {
    var j, len, obj, ref, results;
    this._containment = _containment;
    ref = this._objlist;
    results = [];
    for (j = 0, len = ref.length; j < len; j++) {
      obj = ref[j];
      results.push(obj.setDraggable(obj._draggable, obj._axis, obj._dragopacity));
    }
    return results;
  };

  JSView.prototype.bringSubviewToFront = function(obj) {
    var id, v;
    id = obj._objectID;
    v = $('#' + id);
    return v.appendTo(v.parent());
  };

  JSView.prototype.removeFromSuperview = function() {
    var i, j, len, o, ref, t;
    if (typeof this.destructor === 'function') {
      this.destructor();
    }
    if (this._parent === null) {
      return;
    }
    t = -1;
    i = 0;
    ref = this._parent._objlist;
    for (j = 0, len = ref.length; j < len; j++) {
      o = ref[j];
      if (o._objectID === this._objectID) {
        t = i;
        break;
      }
      i++;
    }
    if (t >= 0) {
      this._parent._objlist.splice(t, 1);
      $(this._viewSelector).remove();
      return null;
    }
  };

  JSView.prototype.removeTapGesture = function(tapnum) {
    switch (tapnum) {
      case 1:
        if (this._userInteractionEnabled === true) {
          return $(this._viewSelector).unbind("tap").bind("tap", (function(_this) {
            return function(event) {
              return event.stopPropagation();
            };
          })(this));
        } else {
          this._tapAction = null;
          return $(this._viewSelector).unbind("tap");
        }
        break;
      case 2:
        if (this._userInteractionEnabled === true) {
          return $(this._viewSelector).unbind("doubletap").bind("doubletap", (function(_this) {
            return function(event) {
              return event.stopPropagation();
            };
          })(this));
        } else {
          this._tapAction2 = null;
          return $(this._viewSelector).unbind("doubletap");
        }
    }
  };

  JSView.prototype.addTapGesture = function(tapAction, tapnum) {
    if (tapnum == null) {
      tapnum = 1;
    }
    if (tapnum === 1) {
      this._tapAction = tapAction;
    } else if (tapnum === 2) {
      this._tapAction2 = tapAction;
    } else {
      return;
    }
    if (!$(this._viewSelector).length) {
      return;
    }
    $(this._viewSelector).css("cursor", "pointer");
    if (tapnum === 1) {
      $(this._viewSelector).unbind("tap");
      $(this._viewSelector).on('tap', (function(_this) {
        return function(e) {
          if ((_this._tapAction != null) && _this._userInteractionEnabled === true && _this._hidden === false) {
            _this._tapAction(_this._self, e);
            return e.stopPropagation();
          }
        };
      })(this));
    }
    if (tapnum === 2) {
      $(this._viewSelector).unbind("doubletap");
      return $(this._viewSelector).on('doubletap', (function(_this) {
        return function(e) {
          if ((_this._tapAction2 != null) && _this._userInteractionEnabled === true && _this._hidden === false) {
            _this._tapAction2(_this._self, e);
            return e.stopPropagation();
          }
        };
      })(this));
    }
  };

  JSView.prototype.animateWithDuration = function(duration, animations, completion, flag) {
    var animobj, b, g, key, r, ret, value;
    if (completion == null) {
      completion = void 0;
    }
    if (flag == null) {
      flag = false;
    }
    duration *= 1000;
    animobj = {};
    for (key in animations) {
      value = animations[key];
      if (key === "alpha") {
        key = "opacity";
      } else if (key === "alpha2") {
        ret = this._bgColor.match(/^(#)(..)(..)(..)$/);
        if ((ret != null) && ret[1] === "#") {
          r = String(parseInt(ret[2], 16));
          g = String(parseInt(ret[3], 16));
          b = String(parseInt(ret[4], 16));
          key = "background-color";
          value = 'rgba(' + r + ', ' + g + ', ' + b + ', ' + value + ')';
        }
      }
      animobj[key] = value;
    }
    return $(this._viewSelector).animate(animobj, duration, (function(_this) {
      return function() {
        for (key in animobj) {
          value = animobj[key];
          switch (key) {
            case "top":
              _this._frame.origin.y = value;
              break;
            case "left":
              _this._frame.origin.x = value;
              break;
            case "opacity":
              _this._alpha = value;
              break;
            case "background-color":
              _this._bgColor = value;
              break;
            case "border-color":
              _this._borderColor = value;
              break;
            case "border-width":
              _this._borderWidth = value;
              break;
            case "width":
              _this._frame.size.width = value;
              break;
            case "height":
              _this._frame.size.height = value;
          }
        }
        if ((completion != null)) {
          return completion(_this._self);
        }
      };
    })(this));
  };

  JSView.prototype.setShadow = function(_shadow) {
    this._shadow = _shadow;
    if (this._shadow === true) {
      return $(this._viewSelector).css("box-shadow", "2px 2px 10px rgba(0,0,0,0.4)");
    } else {
      return $(this._viewSelector).css("box-shadow", "none");
    }
  };

  JSView.prototype.didBrowserResize = function() {
    var j, len, obj, ref, results;
    ref = this._objlist;
    results = [];
    for (j = 0, len = ref.length; j < len; j++) {
      obj = ref[j];
      if (typeof obj.didBrowserResize === 'function') {
        results.push(obj.didBrowserResize());
      } else {
        results.push(void 0);
      }
    }
    return results;
  };

  JSView.prototype.viewDidAppear = function() {
    var i, j, o, ref;
    this.setHidden(this._hidden);
    this.setFrame(this._frame);
    this.setBackgroundColor(this._bgColor);
    this.setCornerRadius(this._cornerRadius);
    this.setAlpha(this._alpha);
    this.setBorderColor(this._borderColor);
    this.setBorderWidth(this._borderWidth);
    this.setShadow(this._shadow);
    this.setDraggable(this._draggable, this._axis, this._dragopacity);
    this.setResizable(this._resizable, this._resizeAction, this._resizeopacity);
    this.setClipToBounds(this._clipToBounds);
    this.removeTapGesture(1);
    this.removeTapGesture(2);
    if ((this._tapAction != null)) {
      this.addTapGesture(this._tapAction);
    }
    if ((this._tapAction2 != null)) {
      this.addTapGesture(this._tapAction2, 2);
    }
    if (this._objlist.length > 0) {
      for (i = j = 0, ref = objectNum(this._objlist); 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {
        o = this._objlist[i];
        if (!$(o._viewSelector).length) {
          $(this._viewSelector).append(o._div);
          o.viewDidAppear();
        }
      }
    }
    return $(this._viewSelector).bind({
      'touchstart mousedown': (function(_this) {
        return function(event) {
          var e;
          if (_this._editable === false && (event != null)) {
            event.preventDefault();
          }
          _this.touched = true;
          if (typeof _this.touchesBegan === 'function') {
            if (isTouch() === true && event.changedTouches !== void 0) {
              e = event.changedTouches[0];
            } else {
              e = event;
            }
            return _this.touchesBegan(e);
          }
        };
      })(this),
      'touchmove mousemove': (function(_this) {
        return function(event) {
          var e;
          if (_this._editable === false && (event != null)) {
            event.preventDefault();
          }
          if (_this.touched) {
            if (typeof _this.touchesMoved === 'function') {
              if (isTouch() === true && event.changedTouches !== void 0) {
                e = event.changedTouches[0];
              } else {
                e = event;
              }
              return _this.touchesMoved(e);
            }
          }
        };
      })(this),
      'touchend mouseup': (function(_this) {
        return function(event) {
          var e;
          if (_this._editable === false && (event != null)) {
            event.preventDefault();
          }
          _this.touched = false;
          if (typeof _this.touchesEnded === 'function') {
            if (isTouch() === true && event.changedTouches !== void 0) {
              e = event.changedTouches[0];
            } else {
              e = event;
            }
            _this._frame.origin.x = parseInt($(_this._viewSelector).css('left').replace(/px/, ''));
            _this._frame.origin.y = parseInt($(_this._viewSelector).css('top').replace(/px/, ''));
            return _this.touchesEnded(e);
          }
        };
      })(this),
      'touchcancel': (function(_this) {
        return function(event) {
          var e;
          if (_this._editable === false && (event != null)) {
            event.preventDefault();
          }
          _this.touched = false;
          if (typeof _this.touchesCancelled === 'function') {
            if (isTouch() === true && event.changedTouches !== void 0) {
              e = event.changedTouches[0];
            } else {
              e = event;
            }
            return _this.touchesCancelled(e);
          }
        };
      })(this)
    });
  };

  return JSView;

})(JSResponder);

JSActivityIndicatorView = (function(superClass) {
  extend(JSActivityIndicatorView, superClass);

  function JSActivityIndicatorView(frame) {
    JSActivityIndicatorView.__super__.constructor.call(this, frame);
    this._bgColor = JSColor("clearColor");
    this._userInteractionEnabled = false;
    this._activityIndicatorViewStyle = "JSActivityIndicatorViewStyleGray";
    this._body = void 0;
  }

  JSActivityIndicatorView.prototype.startAnimating = function() {
    return this.setHidden(false);
  };

  JSActivityIndicatorView.prototype.stopAnimating = function() {
    return this.setHidden(true);
  };

  JSActivityIndicatorView.prototype.setActivityIndicatorViewStyle = function(_activityIndicatorViewStyle) {
    var indicator_img, tag;
    this._activityIndicatorViewStyle = _activityIndicatorViewStyle;
    if (this._activityIndicatorViewStyle === "JSActivityIndicatorViewStyleGray") {
      indicator_img = "loading_indicator_gray.gif";
    } else if (this._activityIndicatorViewStyle === "JSActivityIndicatorViewStyleWhite") {
      indicator_img = "loading_indicator_white.gif";
    } else {
      return;
    }
    tag = "<img id='" + this._objectID + "_indicator' src='syslibs/Picture/" + indicator_img + "' style='position:absolute;z-index:1;' />";
    if (($(this._viewSelector + "_indicator").length)) {
      $(this._viewSelector + "_indicator").remove();
    }
    $(this._viewSelector).append(tag);
    $(this._viewSelector + "_indicator").width(this._frame.size.width);
    $(this._viewSelector + "_indicator").height(this._frame.size.height);
    return this._body = $(this._viewSelector + "_indicator");
  };

  JSActivityIndicatorView.prototype.viewDidAppear = function() {
    JSActivityIndicatorView.__super__.viewDidAppear.call(this);
    return this.setActivityIndicatorViewStyle(this._activityIndicatorViewStyle);
  };

  return JSActivityIndicatorView;

})(JSView);

JSAlertView = (function(superClass) {
  extend(JSAlertView, superClass);

  function JSAlertView(_title, _message, _param, _passform) {
    this._title = _title;
    this._message = _message;
    this._param = _param != null ? _param : void 0;
    this._passform = _passform != null ? _passform : void 0;
    JSAlertView.__super__.constructor.call(this);
    this._bgColor = JSColor("clearColor");
    this._style = "JSAlertViewStyleDefault";
    this.delegate = this;
    this.cancel = false;
    this._closeEvent = void 0;
  }

  JSAlertView.prototype.setAlertViewStyle = function(_style) {
    var addtag, alerthash, buttonhash, cancelmethod, dialogHeight, formtype, i, j, p, ref, value;
    this._style = _style;
    $("body").css({
      "font-size": "80%"
    });
    this._tag = "<div id='" + this._objectID + "_form' title='" + this._title + "'>";
    this._tag += "<p class='validateTips' style='height:24px;'>" + this._message + "</p>";
    if (this._style === "JSAlertViewStylePlainTextInput" && (this._param != null)) {
      dialogHeight = 200 + (48 * this._param.length);
      this._tag += "<fieldset style='border:0px transparent dotted;'>";
      for (i = j = 0, ref = this._param.length; 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {
        p = this._param[i];
        if ((this._data != null)) {
          value = this._data[i];
        } else {
          value = "";
        }
        this._tag += "<label style='position:relative; top:" + (i * 12) + "px; vertical-align:bottom; height:24px;'>" + p + "</labeL><br>";
        if ((this._passform != null)) {
          if (this._passform.indexOf(i) < 0) {
            formtype = "text";
          } else {
            formtype = "password";
          }
        }
        addtag = "<input type='" + formtype + "' name='" + this._objectID + "_textfield_" + i + "' id='" + this._objectID + "_textfield_" + i + "' style='position:relative; top:" + (i * 12) + "px; width:" + this._frame.size.width + "px;height:16px;font-size:10pt;' value='" + value + "' /><br>";
        this._tag += addtag;
      }
      this._tag += "</fieldset>";
    } else {
      dialogHeight = 200;
    }
    this._tag += "</div>";
    if (($(this._viewSelector + "_form").length)) {
      $(this._viewSelector + "_form").remove();
    }
    $(this._viewSelector).append(this._tag);
    buttonhash = {
      OK: (function(_this) {
        return function() {
          var arr, k, ref1, t, text;
          if ((_this.delegate != null) && typeof _this.delegate.clickedButtonAtIndex === "function") {
            switch (_this._style) {
              case "JSAlertViewStylePlainTextInput":
                arr = [];
                for (i = k = 0, ref1 = _this._param.length; 0 <= ref1 ? k < ref1 : k > ref1; i = 0 <= ref1 ? ++k : --k) {
                  t = $(_this._viewSelector + "_textfield_" + i).val();
                  $(_this._viewSelector + "_textfield_" + i).css('font-size', '16');
                  arr.push(t);
                }
                text = JSON.stringify(arr);
                _this.delegate.clickedButtonAtIndex(text, _this._self);
                break;
              case "JSAlertViewStyleDefault":
                _this.delegate.clickedButtonAtIndex(1, _this._self);
            }
          }
          $(_this._viewSelector + "_form").dialog("close");
          return _this._self.removeFromSuperview();
        };
      })(this)
    };
    if (this.cancel === true) {
      cancelmethod = {
        Cancel: (function(_this) {
          return function() {
            if ((_this.delegate != null) && typeof _this.delegate.clickedButtonAtIndex === "function") {
              _this.delegate.clickedButtonAtIndex(0, _this._self);
            }
            $(_this._viewSelector + "_form").dialog("close");
            return _this._self.removeFromSuperview();
          };
        })(this)
      };
      buttonhash['Cancel'] = cancelmethod['Cancel'];
    }
    alerthash = {
      autoOpen: false,
      width: 440,
      height: dialogHeight,
      modal: true,
      show: 500,
      draggable: false,
      closeOnEscape: true,
      close: (function(_this) {
        return function() {
          if ((_this.delegate != null) && typeof _this.delegate.closedDialog === "function") {
            _this.delegate.closedDialog(_this._self);
          }
          $(_this._viewSelector + "_form").dialog("close");
          return _this._self.removeFromSuperview();
        };
      })(this)
    };
    alerthash["buttons"] = buttonhash;
    return $(this._viewSelector + "_form").dialog(alerthash);
  };

  JSAlertView.prototype.setData = function(_data) {
    var i, j, ref, results, value;
    this._data = _data;
    if (($(this._viewSelector + "_form").length)) {
      results = [];
      for (i = j = 0, ref = this._data.length; 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {
        value = this._data[i];
        results.push($(this._viewSelector + "_textfield_" + i).val(value));
      }
      return results;
    }
  };

  JSAlertView.prototype.setCloseEvent = function(_closeEvent) {
    this._closeEvent = _closeEvent;
  };

  JSAlertView.prototype.show = function() {
    $(this._viewSelector + "_form").on('keyPress', (function(_this) {
      return function(e) {
        return alert(e);
      };
    })(this));
    if ((this._closeEvent != null)) {
      $(this._viewSelector + "_form").dialog({
        close: (function(_this) {
          return function() {
            if ((_this.delegate != null) && typeof _this.delegate.closedDialog === "function") {
              _this.delegate.closedDialog(_this._self);
            }
            return _this._closeEvent(_this._self);
          };
        })(this)
      });
    }
    return $(this._viewSelector + "_form").dialog("open");
  };

  JSAlertView.prototype.viewDidAppear = function() {
    return this.setAlertViewStyle(this._style);
  };

  JSAlertView.prototype.keyPress = function(code) {
    return alert(code);
  };

  return JSAlertView;

})(JSView);

JSControl = (function(superClass) {
  extend(JSControl, superClass);

  function JSControl(frame) {
    JSControl.__super__.constructor.call(this, frame);
    this._enable = true;
  }

  JSControl.prototype.addTarget = function(action1) {
    this.action = action1;
  };

  JSControl.prototype.setEnable = function(_enable) {
    this._enable = _enable;
    if (this._enable === false) {
      return this._self.setAlpha(0.2);
    } else {
      return this._self.setAlpha(1.0);
    }
  };

  JSControl.prototype.viewDidAppear = function() {
    JSControl.__super__.viewDidAppear.call(this);
    this.setEnable(this._enable);
    return $(this._viewSelector).on('click', (function(_this) {
      return function(event) {
        if ((_this.action != null) && _this._enable === true && _this._userInteractionEnabled === true) {
          event.stopPropagation();
          return _this.action(_this._self);
        }
      };
    })(this));
  };

  return JSControl;

})(JSView);

JSImageView = (function(superClass) {
  extend(JSImageView, superClass);

  function JSImageView(frame) {
    JSImageView.__super__.constructor.call(this, frame);
    this._userInteractionEnabled = false;
    this._bgColor = JSColor("clearColor");
    this._clipToBounds = true;
    this._contentMode = "JSViewContentModeNormal";
    this._image = void 0;
  }

  JSImageView.prototype.setImage = function(_image) {
    var img;
    this._image = _image;
    if ((this._image != null)) {
      img = "<img id='" + this._objectID + "_image' src='" + this._image._imagepath + "' style='position:absolute;z-index:1;left:0px;top:0px;width:" + this._frame.size.width + "px;height:" + this._frame.size.height + "px;'>";
      if (($(this._viewSelector).length)) {
        if (($(this._viewSelector + "_image").length)) {
          $(this._viewSelector + "_image").remove();
        }
        $(this._viewSelector).css("opacity", this._alpha);
        $(this._viewSelector).append(img);
        return this.setContentMode(this._contentMode);
      } else {
        return this._div = this._div.replace(/<!--null-->/, img + "<!--null-->");
      }
    } else {
      if (($(this._viewSelector + "_image").length)) {
        $(this._viewSelector + "_image").remove();
      }
      return $(this._viewSelector).css("opacity", "0.0");
    }
  };

  JSImageView.prototype.setCornerRadius = function(radius) {
    JSImageView.__super__.setCornerRadius.call(this, radius);
    $(this._viewSelector + "_image").css("border-radius", radius);
    $(this._viewSelector + "_image").css("-webkit-border-radius", radius);
    return $(this._viewSelector + "_image").css("-moz-border-radius", radius);
  };

  JSImageView.prototype.setContentMode = function(_contentMode) {
    this._contentMode = _contentMode;
    if ($(this._viewSelector).length && $(this._viewSelector + "_image").length) {
      switch (this._contentMode) {
        case "JSViewContentModeScaleAspectFit":
          return $(this._viewSelector).imgLiquid({
            fill: false
          });
        case "JSViewContentModeScaleAspectFill":
          return $(this._viewSelector).imgLiquid();
      }
    }
  };

  JSImageView.prototype.viewDidAppear = function() {
    JSImageView.__super__.viewDidAppear.call(this);
    this.setCornerRadius(this._cornerRadius);
    this.setImage(this._image);
    return this.setContentMode(this._contentMode);
  };

  return JSImageView;

})(JSView);

JSLabel = (function(superClass) {
  extend(JSLabel, superClass);

  function JSLabel(frame) {
    if (frame == null) {
      frame = JSRectMake(0, 0, 120, 24);
    }
    JSLabel.__super__.constructor.call(this, frame);
    this._textSize = 10;
    this._textColor = JSColor("black");
    this._textWeight = "normal";
    this._bgColor = JSColor("#f0f0f0");
    this._textAlignment = "JSTextAlignmentCenter";
    this._text = "Label";
  }

  JSLabel.prototype.setText = function(_text) {
    this._text = _text;
    if (($(this._viewSelector).length)) {
      $(this._viewSelector).css("text-indent", "4px");
      return $(this._viewSelector).html(this._text);
    }
  };

  JSLabel.prototype.setTextSize = function(_textSize) {
    this._textSize = _textSize;
    if (($(this._viewSelector).length)) {
      return $(this._viewSelector).css("font-size", this._textSize + "pt");
    }
  };

  JSLabel.prototype.setTextWeight = function(_textWeight) {
    this._textWeight = _textWeight;
    return $(this._viewSelector).css("font-weight", this._textWeight);
  };

  JSLabel.prototype.setTextColor = function(_textColor) {
    this._textColor = _textColor;
    if (($(this._viewSelector).length)) {
      return $(this._viewSelector).css("color", this._textColor);
    }
  };

  JSLabel.prototype.setTextAlignment = function(_textAlignment) {
    this._textAlignment = _textAlignment;
    switch (this._textAlignment) {
      case "JSTextAlignmentCenter":
        return $(this._viewSelector).css("text-align", "center");
      case "JSTextAlignmentLeft":
        return $(this._viewSelector).css("text-align", "left");
      case "JSTextAlignmentRight":
        return $(this._viewSelector).css("text-align", "right");
      default:
        return $(this._viewSelector).css("text-align", "center");
    }
  };

  JSLabel.prototype.setFrame = function(frame) {
    JSLabel.__super__.setFrame.call(this, frame);
    $(this._viewSelector).width(frame.size.width);
    return $(this._viewSelector).height(frame.size.height);
  };

  JSLabel.prototype.viewDidAppear = function() {
    JSLabel.__super__.viewDidAppear.call(this);
    $(this._viewSelector).width(this._frame.size.width);
    $(this._viewSelector).css("vertical-align", "middle");
    $(this._viewSelector).css("line-height", this._frame.size.height + "px");
    $(this._viewSelector).css("font-weight", this._textWeight);
    this.setText(this._text);
    this.setTextSize(this._textSize);
    this.setTextColor(this._textColor);
    return this.setTextAlignment(this._textAlignment);
  };

  return JSLabel;

})(JSView);

JSRect = (function(superClass) {
  extend(JSRect, superClass);

  function JSRect() {
    JSRect.__super__.constructor.call(this);
    this.origin = new JSPoint();
    this.size = new JSSize();
  }

  return JSRect;

})(JSObject);

JSScrollView = (function(superClass) {
  extend(JSScrollView, superClass);

  function JSScrollView(frame) {
    this.animateWithDuration = bind(this.animateWithDuration, this);
    JSScrollView.__super__.constructor.call(this, frame);
    this._frame.size.width;
    this._scroll = false;
  }

  JSScrollView.prototype.destructor = function() {
    return JSScrollView.__super__.destructor.call(this);
  };

  JSScrollView.prototype.setScroll = function(_scroll) {
    this._scroll = _scroll;
    if (this._scroll === true) {
      $(this._viewSelector).css("overflow", "auto");
      return $(this._viewSelector).css("-webkit-overflow-scrolling", "touch");
    } else {
      return this.setClipToBounds(this._clipToBounds);
    }
  };

  JSScrollView.prototype.viewDidAppear = function() {
    JSScrollView.__super__.viewDidAppear.call(this);
    return this.setScroll(this._scroll);
  };

  JSScrollView.prototype.animateWithDuration = function(duration, animations, completion) {
    if (completion == null) {
      completion = null;
    }
    return JSScrollView.__super__.animateWithDuration.call(this, duration, animations, completion);
  };

  return JSScrollView;

})(JSView);

JSTableViewCell = (function(superClass) {
  extend(JSTableViewCell, superClass);

  function JSTableViewCell() {
    var sidesize;
    JSTableViewCell.__super__.constructor.call(this);
    this._image = null;
    this._imageview = null;
    this._alpha = 1.0;
    this._text = "";
    this._textColor = JSColor("black");
    this._textSize = 12;
    this._textAlignment = "JSTextAlignmentLeft";
    this._bgColor = JSColor("clearColor");
    this._borderColor = JSColor("#d0d8e0");
    this._borderWidth = 1;
    sidesize = this._frame.size.height;
    this.tag = "<div id='" + this._objectID + "_cell' style='position:absolute;left:0px;top:0px;width:" + this._frame.size.width + "px;height:" + this._frame.size.height + "px;z-index:1; opacity:" + this._alpha + ";'><div id='" + this._objectID + "_text' style='position:relative;left:" + this._frame.size.height + "px;top:0px;width:" + (this._frame.size.width - sidesize - 4) + "px;height:" + this._frame.size.height + "px;display:table-cell;vertical-align:middle;'></div></div>";
  }

  JSTableViewCell.prototype.setText = function(_text) {
    this._text = _text;
    if (($(this._viewSelector + "_text").length)) {
      return $(this._viewSelector + "_text").html(this._text);
    }
  };

  JSTableViewCell.prototype.setTextSize = function(_textSize) {
    this._textSize = _textSize;
    if (($(this._viewSelector + "_text").length)) {
      return $(this._viewSelector + "_text").css("font-size", this._textSize);
    }
  };

  JSTableViewCell.prototype.setTextColor = function(_textColor) {
    this._textColor = _textColor;
    if (($(this._viewSelector + "_text").length)) {
      return $(this._viewSelector + "_text").css("color", this._textColor);
    }
  };

  JSTableViewCell.prototype.setTextAlignment = function(_textAlignment) {
    this._textAlignment = _textAlignment;
    switch (this._textAlignment) {
      case "JSTextAlignmentLeft":
        return $(this._viewSelector + "_text").css("text-align", "left");
      case "JSTextAlignmentCenter":
        return $(this._viewSelector + "_text").css("text-align", "center");
      case "JSTextAlignmentRight":
        return $(this._viewSelector + "_text").css("text-align", "right");
    }
  };

  JSTableViewCell.prototype.setImage = function(_image) {
    var sidesize;
    this._image = _image;
    if (!$(this._viewSelector + "_cell").length) {
      return;
    }
    if (this._image == null) {
      return;
    }
    if (($(this._viewSelector + "_image").length)) {
      $(this._viewSelector + "_image").remove();
    }
    sidesize = this._frame.size.height;
    return $(this._viewSelector + "_cell").append("<img id='" + this._objectID + "_image' border='0' src='" + this._image._imagepath + "' style='position:absolute;left:0px;top:0px;width:" + sidesize + "px;height:" + sidesize + "px;'>");
  };

  JSTableViewCell.prototype.setFrame = function(frame) {
    JSTableViewCell.__super__.setFrame.call(this, frame);
    if (($(this._viewSelector + "_cell").length)) {
      $(this._viewSelector + "_cell").css("width", frame.size.width);
      $(this._viewSelector + "_cell").css("height", frame.size.height);
      $(this._viewSelector + "_image").css("width", frame.size.height);
      $(this._viewSelector + "_image").css("height", frame.size.height);
      $(this._viewSelector + "_text").css("left", frame.size.height);
      $(this._viewSelector + "_text").css("width", frame.size.width - frame.size.height);
      return $(this._viewSelector + "_text").css("height", frame.size.height);
    }
  };

  JSTableViewCell.prototype.viewDidAppear = function() {
    JSTableViewCell.__super__.viewDidAppear.call(this);
    this._frame.origin.x = 1;
    $(this._viewSelector).append(this.tag);
    this.setFrame(this._frame);
    this.setAlpha(this._alpha);
    this.setText(this._text);
    this.setTextColor(this._textColor);
    this.setTextSize(this._textSize);
    this.setTextAlignment(this._textAlignment);
    this.setImage(this._image);
    return $(this._viewSelector).on('tap', (function(_this) {
      return function(event) {
        if (typeof _this.delegate.didSelectRowAtIndexPath === 'function') {
          _this._tableview.deselectRowAtIndexPath();
          _this.setBackgroundColor(JSColor("#87cefa"));
          return _this.delegate.didSelectRowAtIndexPath(_this._cellnum, event);
        }
      };
    })(this));
  };

  return JSTableViewCell;

})(JSView);

JSWindow = (function(superClass) {
  extend(JSWindow, superClass);

  function JSWindow(frame) {
    JSWindow.__super__.constructor.call(this, frame);
  }

  JSWindow.prototype.viewDidAppear = function() {
    return JSWindow.__super__.viewDidAppear.call(this);
  };

  return JSWindow;

})(JSView);

JSButton = (function(superClass) {
  extend(JSButton, superClass);

  function JSButton(frame) {
    if (frame == null) {
      frame = JSRectMake(4, 4, 64, 24);
    }
    JSButton.__super__.constructor.call(this, frame);
    this._borderColor = JSColor("clearColor");
    this._bgColor = JSColor("clearColor");
    this._buttonTitle = "Button";
    this._style = "JSFormButtonStyleNormal";
    this._textSize = 8;
    this._picturedir = 'Media/Picture';
    this.delegate = null;
    this.icon = void 0;
    this.savedir = '';
    this.filter = [];
    this.selector = void 0;
  }

  JSButton.prototype.setIcon = function(icon) {
    this.icon = icon;
  };

  JSButton.prototype.setButtonTitle = function(title) {
    this._buttonTitle = title;
    if (($(this._viewSelector + "_button").length)) {
      return $(this._viewSelector + "_button").val(this._buttonTitle);
    }
  };

  JSButton.prototype.setTextSize = function(_textSize) {
    this._textSize = _textSize;
    return $(this._viewSelector + "_button").css('font-size', this._textSize + 'pt');
  };

  JSButton.prototype.setStyle = function(_style) {
    this._style = _style;
    if (($(this._viewSelector + "_button").length)) {
      return this.viewDidAppear();
    }
  };

  JSButton.prototype.setFrame = function(frame) {
    var buttonheight, buttonwidth;
    JSButton.__super__.setFrame.call(this, frame);
    switch (this._style) {
      case "JSFormButtonStyleNormal":
        buttonwidth = frame.size.width;
        buttonheight = frame.size.height;
        $(this._viewSelector + "_button").css("width", buttonwidth + "px");
        return $(this._viewSelector + "_button").css("height", buttonheight + "px");
      case "JSFormButtonStyleImageUpload":
      case "JSFormButtonStyleFileUpload":
      case "JSFormButtonStyleFileUpload":
        buttonwidth = this._frame.size.width;
        return $(this._viewSelector + "_button").css("width", buttonwidth + "px");
    }
  };

  JSButton.prototype.setIcon = function(icon) {
    this.icon = icon;
    $(this._viewSelector + "_button").button({
      icons: {
        primary: this.icon
      }
    });
    return $(this._viewSelector + "_button").tooltip();
  };

  JSButton.prototype.viewDidAppear = function() {
    var buttonheight, buttonwidth, tag;
    JSButton.__super__.viewDidAppear.call(this);
    if (($(this._viewSelector + "_button").length)) {
      $(this._viewSelector + "_button").remove();
    }
    if (($(this._viewSelector + "_pack").length)) {
      $(this._viewSelector + "_pack").remove();
    }
    buttonwidth = this._frame.size.width;
    buttonheight = this._frame.size.height;
    tag = "";
    if (this._style === "JSFormButtonStyleNormal") {
      tag += "<div>";
      if ((this.icon != null)) {
        tag += "<button class='jquery-ui-icon' type='submit' id='" + this._objectID + "_button' style='position:absolute;z-index:1;' title='" + this._buttonTitle + "' />";
      } else {
        tag += "<input type='submit' id='" + this._objectID + "_button' style='position:absolute;z-index:1;' value='" + this._buttonTitle + "' />";
      }
      tag += "</div>";
    } else if (this._style === "JSFormButtonStyleImageUpload") {
      tag += "<div id=\"" + this._objectID + "_pack\">";
      tag += "<input id=\"" + this._objectID + "_file\" type=\"file\" name=\"" + this._objectID + "_file\" style=\"display:none;\">";
      tag += "<button class='jquery-ui-icon' type=\"submit\" id=\"" + this._objectID + "_button\" style=\"position:absolute;z-index:1;\" title=\"image upload\" onClick=\"$('#" + this._objectID + "_file').click();\" />";
      tag += "</div>";
      this.icon = "ui-icon-circle-arrow-n";
    } else if (this._style === "JSFormButtonStyleFileUpload") {
      tag += "<div id=\"" + this._objectID + "_pack\">";
      tag += "<input id=\"" + this._objectID + "_file\" type=\"file\" name=\"" + this._objectID + "_file\" style=\"display:none;\">";
      tag += "<button class='jquery-ui-icon' type=\"submit\" id=\"" + this._objectID + "_button\" style=\"position:absolute;z-index:1;\" title=\"file upload\" onClick=\"$('#" + this._objectID + "_file').click();\" />";
      tag += "</div>";
      this.icon = "ui-icon-circle-arrow-n";
    } else if (this._style === "JSFormButtonStyleFileSelect") {
      tag += "<div id=\"" + this._objectID + "_pack\">";
      tag += "<input id=\"" + this._objectID + "_file\" type=\"file\" name=\"" + this._objectID + "_file\" style=\"display:none;\" multiple>";
      if ((this.icon != null)) {
        tag += "<button class='jquery-ui-icon' type=\"submit\" id=\"" + this._objectID + "_button\" style=\"position:absolute;z-index:1;\" title=\"file select\" onClick=\"$('#" + this._objectID + "_file').click();\" />";
      } else {
        tag += "<input type='submit' id='" + this._objectID + "_button' style='position:absolute;z-index:1;' value='" + this._buttonTitle + "' onClick=\"$('#" + this._objectID + "_file').click();\" />";
      }
      tag += "</div>";
    }
    $(this._viewSelector).append(tag);
    if (this._style === "JSFormButtonStyleFileUpload") {
      $(this._viewSelector + "_file").change((function(_this) {
        return function() {
          if (typeof _this.delegate.didFileUploadStart === 'function') {
            _this.delegate.didFileUploadStart();
          }
          return $(_this._viewSelector + "_file").upload("syslibs/library.php", {
            mode: "uploadfile",
            savedir: _this.savedir,
            filter: _this.filter,
            key: _this._objectID + "_file"
          }, function(res) {
            if (typeof _this.delegate.didFileUpload === 'function') {
              _this.delegate.didFileUpload(res);
            }
            return $(_this._viewSelector + "_file").val("");
          }, "json");
        };
      })(this));
    } else if (this._style === "JSFormButtonStyleImageUpload") {
      $(this._viewSelector + "_file").change((function(_this) {
        return function() {
          if (typeof _this.delegate.didUploadStart === 'function') {
            _this.delegate.didUploadStart();
          }
          return $(_this._viewSelector + "_file").upload("syslibs/library.php", {
            mode: "uploadimage",
            key: _this._objectID + "_file"
          }, function(res) {
            if (typeof _this.delegate.didImageUpload === 'function') {
              _this.delegate.didImageUpload(res);
            }
            $(_this._viewSelector + "_file").val("");
            return $.post("syslibs/library.php", {
              mode: "createThumbnail",
              path: _this._picturedir
            });
          }, "json");
        };
      })(this));
    } else if (this._style === "JSFormButtonStyleFileSelect") {
      $(this._viewSelector + "_file").change((function(_this) {
        return function(e) {
          var file;
          file = e.target.files;
          _this.selector(file);
          return $(_this._viewSelector + "_file").val("");
        };
      })(this));
    }
    $(this._viewSelector).css("overflow", "visible");
    $(this._viewSelector + "_button").css("overflow", "hidden");
    $(this._viewSelector + "_button").css("position", "absolute");
    $(this._viewSelector + "_button").css("background-color", "transparent");
    $(this._viewSelector + "_button").css("font-size", this._textSize + "pt");
    $(this._viewSelector + "_button").css("width", buttonwidth + "px");
    $(this._viewSelector + "_button").css("height", buttonheight + "px");
    if ((this.icon != null)) {
      return $(this._viewSelector + "_button").button({
        icons: {
          primary: this.icon
        }
      });
    } else {
      return $(this._viewSelector + "_button").button();
    }
  };

  return JSButton;

})(JSControl);

JSImagePicker = (function(superClass) {
  extend(JSImagePicker, superClass);

  function JSImagePicker() {
    this.deleteImage = bind(this.deleteImage, this);
    this.editImageList = bind(this.editImageList, this);
    this.closeImagePickerView = bind(this.closeImagePickerView, this);
    this.tapImage = bind(this.tapImage, this);
    JSImagePicker.__super__.constructor.call(this);
    this._thumbnail_width = 120;
    this._thumbnail_height = 120;
    this._clipToBounds = true;
    this._imageList = new Array();
    this.delegate = null;
    this.hilight = null;
    this.picturedir = JSSearchPathForDirectoriesInDomains("JSPictureDirectory");
  }

  JSImagePicker.prototype.dispImageList = function(_filelist) {
    var filelist, h, h2, hnum, imagelist, vnum, vnum2, w, x, y;
    if (!$(this._viewSelector).length) {
      return;
    }
    filelist = JSON.parse(_filelist);
    imagelist = filelist['file'];
    hnum = parseInt(this._frame.size.width / this._thumbnail_width) - 1;
    w = hnum * (this._thumbnail_width + 4) + 4;
    vnum = parseInt(imagelist.length / hnum) + (imagelist.length % hnum !== 0);
    if (vnum * this._thumbnail_height + 64 > this._frame.size.height) {
      vnum = parseInt(this._frame.size.height / this._thumbnail_height) - 1;
    }
    vnum2 = parseInt(this._frame.size.height / (this._thumbnail_height + 4));
    h = vnum * (this._thumbnail_height + 4) + 4;
    h2 = vnum2 * (this._thumbnail_height + 4) + 4;
    x = parseInt(this._frame.size.width / 2 - (w / 2));
    y = -(h2 + 0);
    this.imagebase = new JSScrollView(JSRectMake(x, y, w, h + 36));
    this.imagebase.setShadow(true);
    this.imagebase.setBackgroundColor(JSColor("black"));
    this._self.addSubview(this.imagebase);
    this._self.bringSubviewToFront(this.imagebase);
    this.listbase = new JSScrollView(JSRectMake(0, 0, w, h + 36));
    this.listbase.setClipToBounds(true);
    this.listbase.setScroll(true);
    this.listbase.setAlpha(0.8);
    this.listbase.setBackgroundColor(JSColor("black"));
    this.listbase.addTapGesture((function(_this) {
      return function() {
        if ((_this.hilight != null)) {
          _this.hilight.delcoverview.setAlpha(0.0);
          return _this.hilight = null;
        }
      };
    })(this));
    this.imagebase.addSubview(this.listbase);
    this.imagebase.bringSubviewToFront(this.listbase);
    this.imagectrl = new JSView(JSRectMake(0, h, w, 36));
    this.imagectrl.setAlpha(0.8);
    this.imagectrl.setBackgroundColor(JSColor("white"));
    this.imagebase.addSubview(this.imagectrl);
    this.closebutton = new JSButton(JSRectMake(w - 84, h + 4, 80, 28));
    this.closebutton.setButtonTitle("閉じる");
    this.closebutton.addTarget(this.closeImagePickerView);
    this.closebutton.setShadow(true);
    this.imagebase.addSubview(this.closebutton);
    this.imagebase.bringSubviewToFront(this.closebutton);
    this.editbutton = new JSButton(JSRectMake(4, h + 4, 80, 28));
    this.editbutton.setButtonTitle("編集");
    this.editbutton.addTarget(this.editImageList);
    this.editbutton.setShadow(true);
    this.imagebase.addSubview(this.editbutton);
    this.imagebase.bringSubviewToFront(this.editbutton);
    return this.imagebase.animateWithDuration(0.2, {
      top: 0
    }, (function(_this) {
      return function() {
        var delbutton, delcoverview, delviewfrm, img, imgfname, j, len, pos, results, thumbfname, view, viewfrm, xnum, ynum;
        xnum = 0;
        ynum = 0;
        pos = new JSPoint();
        results = [];
        for (j = 0, len = imagelist.length; j < len; j++) {
          thumbfname = imagelist[j];
          pos.x = xnum * (_this._thumbnail_width + 4) + 4;
          pos.y = ynum * (_this._thumbnail_height + 4) + 4;
          imgfname = thumbfname.replace(/^.*\/(.*?)_s\.(.*)/, "/$1.$2");
          img = new JSImage(thumbfname);
          viewfrm = JSRectMake(pos.x, pos.y, _this._thumbnail_width, _this._thumbnail_height);
          view = new JSImageView(viewfrm);
          view.setContentMode("JSViewContentModeScaleAspectFit");
          view.setBackgroundColor(JSColor("black"));
          view.imgfname = imgfname;
          view.imgthumb = thumbfname;
          view.setUserInteractionEnabled(true);
          view.addTapGesture(_this.tapImage, 2);
          view.addTapGesture(function(sender, e) {
            if ((_this.hilight != null)) {
              _this.hilight.delcoverview.setAlpha(0.0);
            }
            _this.hilight = sender;
            sender.delcoverview.setBackgroundColor(JSColor("white"));
            sender.delcoverview.setAlpha(0.5);
            return e.stopPropagation();
          });
          view.setImage(img);
          delviewfrm = JSRectMake(0, 0, _this._thumbnail_width, _this._thumbnail_height);
          delcoverview = new JSView(delviewfrm);
          delcoverview.setAlpha(0.0);
          delcoverview.setUserInteractionEnabled(false);
          delcoverview.setBackgroundColor(JSColor("black"));
          view.delcoverview = delcoverview;
          view.addSubview(delcoverview);
          delbutton = new JSLabel(JSRectMake(4, 0, 16, 16));
          delbutton.setText("×");
          delbutton.setHidden(true);
          delbutton.setTextColor(JSColor("red"));
          delbutton.setTextSize(14);
          delbutton.setBackgroundColor(JSColor("clearColor"));
          delbutton.addTapGesture(_this.deleteImage);
          view.addSubview(delbutton);
          view.coverview = delcoverview;
          view.delbutton = delbutton;
          _this.listbase.addSubview(view);
          _this._imageList.push(view);
          xnum++;
          if (xnum === hnum) {
            xnum = 0;
            results.push(ynum++);
          } else {
            results.push(void 0);
          }
        }
        return results;
      };
    })(this));
  };

  JSImagePicker.prototype.tapImage = function(sender) {
    this.closeImagePickerView();
    if ((this.delegate != null) && typeof this.delegate.didPickedImage === 'function') {
      return this.delegate.didPickedImage(sender.imgfname);
    }
  };

  JSImagePicker.prototype.closeImagePickerView = function() {
    return this.imagebase.animateWithDuration(0.2, {
      top: -this._frame.size.height
    }, (function(_this) {
      return function() {
        return _this._self.animateWithDuration(0.2, {
          alpha: 0.0
        }, function() {
          _this.imagectrl.removeFromSuperview();
          _this.listbase.removeFromSuperview();
          _this.imagebase.removeFromSuperview();
          if ((_this.delegate != null) && typeof _this.delegate.didClosePickerview === 'function') {
            _this.delegate.didClosePickerview();
          }
          return _this._self.removeFromSuperview();
        });
      };
    })(this));
  };

  JSImagePicker.prototype.editImageList = function(sender) {
    var count, img, j, k, len, len1, ref, ref1, results, results1;
    if (sender._buttonTitle === "編集") {
      sender.setButtonTitle("終了");
      count = 0;
      ref = this._imageList;
      results = [];
      for (j = 0, len = ref.length; j < len; j++) {
        img = ref[j];
        img.removeTapGesture(2);
        img.number = count++;
        img.delbutton.setHidden(false);
        img.setUserInteractionEnabled(false);
        img.coverview.setBackgroundColor(JSColor("black"));
        img.coverview.animateWithDuration(0.2, {
          "alpha": 0.5
        });
        this.listbase.removeTapGesture();
        results.push(this.hilight = null);
      }
      return results;
    } else {
      sender.setButtonTitle("編集");
      ref1 = this._imageList;
      results1 = [];
      for (k = 0, len1 = ref1.length; k < len1; k++) {
        img = ref1[k];
        img.addTapGesture(this.tapImage, 2);
        img.delbutton.setHidden(true);
        img.coverview.animateWithDuration(0.2, {
          "alpha": 0.0
        });
        img.setUserInteractionEnabled(true);
        results1.push(this.listbase.addTapGesture((function(_this) {
          return function() {
            if ((_this.hilight != null)) {
              _this.hilight.delcoverview.setAlpha(0.0);
              return _this.hilight = null;
            }
          };
        })(this)));
      }
      return results1;
    }
  };

  JSImagePicker.prototype.deleteImage = function(sender) {
    return sender._parent.animateWithDuration(0.2, {
      alpha: 0.0
    }, (function(_this) {
      return function() {
        var count, fname, frm, hnum, img, j, len, pos, ref, results, thumb, vnum, xnum, ynum;
        fname = _this._imageList[sender._parent.number].imgfname;
        thumb = _this._imageList[sender._parent.number].imgthumb;
        _this._imageList.splice(sender._parent.number, 1);
        sender._parent.removeFromSuperview();
        $.post("syslibs/library.php", {
          mode: "fileUnlink",
          fpath: _this.picturedir + "/" + fname
        });
        $.post("syslibs/library.php", {
          mode: "fileUnlink",
          fpath: thumb
        });
        xnum = 0;
        ynum = 0;
        hnum = parseInt(_this._frame.size.width / _this._thumbnail_width) - 1;
        pos = new JSPoint();
        vnum = parseInt(_this._imageList.length / hnum) + (_this._imageList.length % hnum !== 0);
        count = 0;
        ref = _this._imageList;
        results = [];
        for (j = 0, len = ref.length; j < len; j++) {
          img = ref[j];
          pos.x = xnum * (_this._thumbnail_width + 4) + 4;
          pos.y = ynum * (_this._thumbnail_height + 4) + 4;
          frm = JSRectMake(pos.x, pos.y, _this._thumbnail_width, _this._thumbnail_height);
          img.setFrame(frm);
          img.number = count++;
          xnum++;
          if (xnum === hnum) {
            xnum = 0;
            results.push(ynum++);
          } else {
            results.push(void 0);
          }
        }
        return results;
      };
    })(this));
  };

  JSImagePicker.prototype.viewDidAppear = function() {
    var fm, frm;
    JSImagePicker.__super__.viewDidAppear.call(this);
    this._self.setBackgroundColor(JSColor("clearColor"));
    this._self.setAlpha(1.0);
    this._self.setClipToBounds(true);
    frm = this._parent._frame;
    frm.origin.x = 0;
    frm.origin.y = 0;
    this._self.setFrame(frm);
    this.windowbase = new JSView(frm);
    this.windowbase.setBackgroundColor(JSColor("black"));
    this.windowbase.setAlpha(0.0);
    this.windowbase.addTapGesture(this.closeImagePickerView);
    this._self.addSubview(this.windowbase);
    fm = new JSFileManager();
    fm.delegate = fm;
    return fm.thumbnailList(this.picturedir, (function(_this) {
      return function(filelist) {
        return _this.windowbase.animateWithDuration(0.2, {
          alpha: 0.7
        }, function() {
          return _this.dispImageList(filelist);
        });
      };
    })(this));
  };

  return JSImagePicker;

})(JSScrollView);

JSListView = (function(superClass) {
  extend(JSListView, superClass);

  function JSListView(frame) {
    JSListView.__super__.constructor.call(this, frame);
    this._listData = null;
    this._orglist = null;
    this._clickaction = null;
    this._dblclickaction = null;
    this._style = "JSListStyleStandard";
    this._textSize = 12;
    this._select = -1;
    this._clipToBounds = true;
    this._delegate = this;
  }

  JSListView.prototype.setFrame = function(frame) {
    JSListView.__super__.setFrame.call(this, frame);
    if (($(this._viewSelector + "_select").length)) {
      $(this._viewSelector + "_select").width(frame.size.width);
      return $(this._viewSelector + "_select").height(frame.size.height);
    }
  };

  JSListView.prototype.setListData = function(list) {
    var disp, i, item, j, k, l, len, len1, m, ref, ref1, size, value;
    this._orglist = list;
    switch (this._style) {
      case "JSListStyleStandard":
      case "JSListStyleDropdown":
        if (this._style === "JSListStyleStandard") {
          size = 2;
          this._listData = list;
        } else {
          size = 1;
          if (list == null) {
            return;
          }
          this._listData = new Array();
          for (j = 0, len = list.length; j < len; j++) {
            item = list[j];
            this._listData.push(item);
          }
        }
        this._tag = "<select id='" + this._objectID + "_select' size='" + size + "' style='width:" + this._frame.size.width + "px;height:" + this._frame.size.height + "px;z-index:1;'>";
        if (this._listData == null) {
          this._listData = new Array();
        }
        for (i = k = 0, ref = this._listData.length; 0 <= ref ? k < ref : k > ref; i = 0 <= ref ? ++k : --k) {
          value = this._listData[i];
          disp = JSEscape(value);
          this._tag += "<option id='" + i + "' value='" + i + "'>" + disp + "</option>";
        }
        this._tag += "</select>";
        if (($(this._viewSelector + "_select").length)) {
          $(this._viewSelector + "_select").remove();
        }
        $(this._viewSelector).append(this._tag);
        $(this._viewSelector + "_select").css("background-color", "clearColor");
        $(this._viewSelector + "_select").css("border", "0px transparent");
        $(this._viewSelector + "_select").css("font-size", this._textSize);
        if (this._style === "JSListStyleStandard") {
          $(this._viewSelector + "_select").on('click', (function(_this) {
            return function(e) {
              e.stopPropagation();
              _this._select = $(_this._viewSelector + "_select option:selected").val();
              if ((_this._clickaction != null) && (_this._select != null)) {
                return _this._clickaction(_this._select);
              }
            };
          })(this));
          $(this._viewSelector + "_select").on("dblclick", (function(_this) {
            return function(e) {
              e.stopPropagation();
              _this._select = $(_this._viewSelector + "_select option:selected").val();
              if ((_this._dblclickaction != null) && (_this._select != null)) {
                return _this._dblclickaction(_this._select);
              }
            };
          })(this));
        } else {
          $(this._viewSelector + "_select").change((function(_this) {
            return function(e) {
              e.stopPropagation();
              _this._select = $(_this._viewSelector + "_select option:selected").val();
              if ((_this._clickaction != null) && (_this._select != null)) {
                return _this._clickaction(_this._select);
              }
            };
          })(this));
        }
        break;
      case "JSListStyleSortable":
        this._tag = "<table style='width:100%;'><tbody id='" + this._objectID + "_select'>";
        if (list == null) {
          return;
        }
        this._listData = new Array();
        for (l = 0, len1 = list.length; l < len1; l++) {
          item = list[l];
          this._listData.push(item);
        }
        for (i = m = 0, ref1 = this._listData.length; 0 <= ref1 ? m < ref1 : m > ref1; i = 0 <= ref1 ? ++m : --m) {
          disp = JSEscape(this._listData[i]);
          this._tag += "<tr id='" + i + "' class='ui-state-default' style='width:100%;z-index:1;'><td>" + disp + "</td></tr>";
        }
        this._tag += "</tbody></table>";
        if (($(this._viewSelector + "_select").length)) {
          $(this._viewSelector + "_select").remove();
        }
        $(this._viewSelector).append(this._tag);
        $(this._viewSelector + "_select").sortable({
          placeholder: "ui-sortable-placeholder",
          distance: 3,
          opacity: 0.8,
          scroll: false,
          update: (function(_this) {
            return function(event, ui) {
              _this.sortReflection();
              if (typeof _this._delegate.sortUpdate === 'function') {
                return _this._delegate.sortUpdate(event, ui);
              }
            };
          })(this)
        });
        $(this._viewSelector + "_select").disableSelection();
        $(this._viewSelector + "_select").css("background-color", "transparent");
        $(this._viewSelector + "_select").css("border", "0px transparent");
        $(this._viewSelector + "_select").css("font-size", (this._textSize - 4) + "pt");
    }
    $(this._viewSelector + "_select").width(this._frame.size.width + "px");
    return $(this._viewSelector + "_select").height(this._frame.size.height + "px");
  };

  JSListView.prototype.count = function() {
    return this._listData.length;
  };

  JSListView.prototype.objectAtIndex = function(index) {
    return this._listData[index];
  };

  JSListView.prototype.indexOfObject = function(target) {
    var num;
    num = this._listData.indexOf(target);
    return num;
  };

  JSListView.prototype.getSelect = function() {
    return this._select;
  };

  JSListView.prototype.setSelect = function(_select) {
    this._select = _select;
    return $(this._viewSelector + "_select").val(this._select);
  };

  JSListView.prototype.sortReflection = function() {
    var arr, i, j, key, len, ret;
    if (this._style === "JSListStyleSortable") {
      arr = $(this._viewSelector + "_select").sortable("toArray");
      ret = [];
      for (i = j = 0, len = arr.length; j < len; i = ++j) {
        key = arr[i];
        ret[i] = this._orglist[key];
      }
      return this._listData = ret;
    }
  };

  JSListView.prototype.setTextSize = function(_textSize) {
    this._textSize = _textSize;
    if ((this._listData != null)) {
      return this.setListData(this._listData);
    }
  };

  JSListView.prototype.addTarget = function(action, tap) {
    if (tap == null) {
      tap = 1;
    }
    if (tap === 1) {
      return this._clickaction = action;
    } else {
      return this._dblclickaction = action;
    }
  };

  JSListView.prototype.setStyle = function(_style) {
    this._style = _style;
    return this.setListData(this._listData);
  };

  JSListView.prototype.reload = function() {
    return this.setListData(this._listData);
  };

  JSListView.prototype.viewDidAppear = function() {
    JSListView.__super__.viewDidAppear.call(this);
    this.setListData(this._listData);
    return this.setSelect(this._select);
  };

  return JSListView;

})(JSScrollView);

JSMenuView = (function(superClass) {
  extend(JSMenuView, superClass);

  function JSMenuView(frame) {
    if (frame == null) {
      frame = JSRectMake(0, 0, 200, 0);
    }
    JSMenuView.__super__.constructor.call(this, frame);
    this._textSize = 10;
    this._bgColor = JSColor("clearColor");
    this._clipToBounds = false;
    this._containment = false;
  }

  JSMenuView.prototype.addTarget = function(_action) {
    this._action = _action;
  };

  JSMenuView.prototype.setTextSize = function(_textSize) {
    this._textSize = _textSize;
    return {
      addMenuItem: this._menuitem
    };
  };

  JSMenuView.prototype.addMenuItem = function(_menuitem) {
    var disp, j, len, menustr, ref;
    this._menuitem = _menuitem;
    if (this._menuitem == null) {
      return;
    }
    if (!$(this._viewSelector).length) {
      return;
    }
    this._div = "<ul id='" + this._objectID + "_menu' style='z-index:1;'><!--menuitem--></ul>";
    menustr = "";
    ref = this._menuitem;
    for (j = 0, len = ref.length; j < len; j++) {
      disp = ref[j];
      menustr += "<li><div>" + disp + "</div></li>";
    }
    this._div = this._div.replace(/<!--menuitem-->/, menustr);
    if (($(this._viewSelector + "_menu").length)) {
      $(this._viewSelector + "_menu").remove();
    }
    $(this._viewSelector).append(this._div);
    $(this._viewSelector + "_menu").css("left", "0px");
    $(this._viewSelector + "_menu").css("top", "0px");
    $(this._viewSelector + "_menu").css("position", "absolute");
    $(this._viewSelector + "_menu").css("overflow", "visible");
    $(this._viewSelector + "_menu").css("font-size", this._textSize + "pt");
    return $(this._viewSelector + "_menu").menu({
      select: (function(_this) {
        return function(event, ui) {
          var item;
          if (_this._userInteractionEnabled === false) {
            return;
          }
          item = ui.item.text();
          _this.selectMenuItem(item);
          return _this.closeMenu();
        };
      })(this),
      classes: {
        "ui-menu": "highlight"
      },
      position: {
        my: "left top",
        at: "right-5 top+5"
      }
    });
  };

  JSMenuView.prototype.selectMenuItem = function(item) {
    var i, j, len, o, ref, ret;
    if ((this._action != null)) {
      ref = this._menuitem;
      for (i = j = 0, len = ref.length; j < len; i = ++j) {
        o = ref[i];
        if (o === item) {
          ret = i;
          break;
        }
      }
      return this._action(ret);
    }
  };

  JSMenuView.prototype.closeMenu = function() {
    $(this._viewSelector + "_menu").remove();
    return event.stopPropagation();
  };

  JSMenuView.prototype.viewDidAppear = function() {
    JSMenuView.__super__.viewDidAppear.call(this);
    if (!$(this._viewSelector + "_menu").length) {
      return this.addMenuItem(this._menuitem);
    }
  };

  return JSMenuView;

})(JSScrollView);

JSSegmentedControl = (function(superClass) {
  extend(JSSegmentedControl, superClass);

  function JSSegmentedControl(_dataarray) {
    this._dataarray = _dataarray;
    JSSegmentedControl.__super__.constructor.call(this, JSRectMake(0, 0, 120, 32));
    this._bgColor = JSColor("clearColor");
    this._textSize = 12;
    this._selectedSegmentIndex = -1;
  }

  JSSegmentedControl.prototype.setValue = function(_selectedSegmentIndex) {
    this._selectedSegmentIndex = _selectedSegmentIndex;
    if (($(this._viewSelector + "_radio").length)) {
      if (this._selectedSegmentIndex < 0) {
        return this.addSegmentTag();
      } else {
        $("input:radio[name='" + this._objectID + "_radio'][value='" + this._selectedSegmentIndex + "']").attr("checked", "checked");
        return $(this._viewSelector + "_radio").buttonset('refresh');
      }
    }
  };

  JSSegmentedControl.prototype.getValue = function() {
    return this._selectedSegmentIndex;
  };

  JSSegmentedControl.prototype.setTextSize = function(_textSize) {
    this._textSize = _textSize;
  };

  JSSegmentedControl.prototype.addSegmentTag = function() {
    var i, j, ref, tag;
    tag = '<div id="' + this._objectID + '_radio" style="width:' + this._frame.size.width + 'px;height:' + this._frame.size.height + 'px;display:table-cell;vertical-align:middle;">';
    for (i = j = 0, ref = this._dataarray.length; 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {
      tag += '<input type="radio" id="' + this._objectID + '_radio_' + i + '" name="' + this._objectID + '_radio" value="' + i + '" /><label for="' + this._objectID + '_radio_' + i + '" style="width:' + (this._frame.size.width / this._dataarray.length) + 'px;height:' + this._frame.size.height + 'px;border:1px #f0f0f0 solid;font-size:' + this._textSize + 'pt;"><div style="position:absolute;left:0px;top:0px;width:100%;height:100%;display:table-cell;line-height:' + this._frame.size.height + 'px;">' + this._dataarray[i] + '</div></label>';
    }
    tag += '</div>';
    if (($(this._viewSelector + "_radio").length)) {
      $(this._viewSelector + "_radio").remove();
    }
    $(this._viewSelector).append(tag);
    $(this._viewSelector + "_radio").buttonset();
    $(this._viewSelector).off();
    return $(this._viewSelector).on('click', (function(_this) {
      return function() {
        var select;
        _this.__select = parseInt(_this._selectedSegmentIndex);
        $(_this._viewSelector + "_radio").buttonset('refresh');
        select = parseInt($("input:radio[name='" + _this._objectID + "_radio']:checked").val());
        if ((select != null) && _this.__select !== select) {
          _this._selectedSegmentIndex = select;
          if ((_this.action != null)) {
            return _this.action(_this._self);
          }
        }
      };
    })(this));
  };

  JSSegmentedControl.prototype.viewDidAppear = function() {
    JSSegmentedControl.__super__.viewDidAppear.call(this);
    if (this._dataarray == null) {
      return;
    }
    this.addSegmentTag();
    return this.setValue(this._selectedSegmentIndex);
  };

  return JSSegmentedControl;

})(JSControl);

JSSwitch = (function(superClass) {
  extend(JSSwitch, superClass);

  function JSSwitch(frame) {
    if (frame == null) {
      frame = JSRectMake(0, 2, 86, 24);
    }
    JSSwitch.__super__.constructor.call(this, frame);
    this._bgColor = JSColor("clearColor");
    this._value = false;
  }

  JSSwitch.prototype.setValue = function(_value) {
    this._value = _value;
    if (this._value === true) {
      $("input[name='" + this._objectID + "_radio']").val(['on']);
    } else {
      $("input[name='" + this._objectID + "_radio']").val(['off']);
    }
    return $(this._viewSelector).buttonset();
  };

  JSSwitch.prototype.getValue = function() {
    var ret, val;
    val = $("input[name='" + this._objectID + "_radio']:checked").val();
    if (val === "on") {
      ret = true;
    } else {
      ret = false;
    }
    return ret;
  };

  JSSwitch.prototype.viewDidAppear = function() {
    var tag;
    JSSwitch.__super__.viewDidAppear.call(this);
    tag = "<div id='" + this._objectID + "_switch' style='position:absolute;z-index:1;font-size:8pt; margin:0;float:left;width:" + this._frame.size.width + "px;'>";
    tag += "<input type='radio' id='" + this._objectID + "_off' name='" + this._objectID + "_radio' value='off' style='height:20px;'><label for='" + this._objectID + "_off'>OFF</label>";
    tag += "<input type='radio' id='" + this._objectID + "_on' name='" + this._objectID + "_radio' value='on' style='height:20px;'><label for='" + this._objectID + "_on'>ON</label>";
    tag += "</div>";
    if (($(this._viewSelector + "_switch").length)) {
      $(this._viewSelector + "switch").remove();
    }
    $(this._viewSelector).append(tag);
    this.setValue(this._value);
    return $(this._viewSelector).buttonset();
  };

  return JSSwitch;

})(JSControl);

JSTableView = (function(superClass) {
  extend(JSTableView, superClass);

  function JSTableView(frame) {
    if (frame == null) {
      frame = getBounds();
    }
    JSTableView.__super__.constructor.call(this, frame);
    this._rowHeight = 32;
    this._clipToBounds = true;
    this._bgColor = JSColor("white");
    this._scroll = true;
    this._titlebarColor = JSColor("#d0d8e0");
    this._titleColor = JSColor("black");
    this._title = "Title Bar";
    this._titleBar = void 0;
    this._tableView = void 0;
    this.delegate = null;
    this.dataSource = null;
    this.childlist = [];
    this.bounds = getBounds();
  }

  JSTableView.prototype.setRowHeight = function(_rowHeight) {
    this._rowHeight = _rowHeight;
  };

  JSTableView.prototype.destructor = function() {
    return JSTableView.__super__.destructor.call(this);
  };

  JSTableView.prototype.addTableView = function() {
    var cell, cellHeight, diff_y, i, j, ref, results;
    if (typeof this.dataSource.numberOfRowsInSection === 'function') {
      this._dataNum = this.dataSource.numberOfRowsInSection();
    } else {
      this._dataNum = 0;
    }
    if (typeof this.dataSource.numberOfSectionsInTableView === 'function') {
      this._sectionNum = this.dataSource.numberOfSectionsInTableView();
    } else {
      this._sectionNum = 1;
    }
    this._tableView.setScroll(true);
    diff_y = this._rowHeight;
    this._parent.bringSubviewToFront(this._self);
    results = [];
    for (i = j = 0, ref = this._dataNum; 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {
      if (typeof this.delegate.heightForRowAtIndexPath === 'function') {
        cellHeight = this.delegate.heightForRowAtIndexPath(i);
      } else {
        cellHeight = this._rowHeight;
      }
      cell = this.dataSource.cellForRowAtIndexPath(i);
      cell._cellnum = i;
      cell.delegate = this.delegate;
      cell._tableview = this;
      this.childlist.push(cell);
      cell.setFrame(JSRectMake(1, diff_y, this._frame.size.width - 4, cellHeight));
      this._tableView.addSubview(cell);
      results.push(diff_y += cellHeight + 1);
    }
    return results;
  };

  JSTableView.prototype.reloadData = function() {
    var j, len, obj, ref;
    if ((this._tableView != null)) {
      ref = this.childlist;
      for (j = 0, len = ref.length; j < len; j++) {
        obj = ref[j];
        obj.removeFromSuperview();
      }
      return this.addTableView();
    }
  };

  JSTableView.prototype.selectRowAtIndexPath = function(num) {
    var i, j, len, obj, ref, results;
    if ((this._tableView != null)) {
      ref = this.childlist;
      results = [];
      for (i = j = 0, len = ref.length; j < len; i = ++j) {
        obj = ref[i];
        if (i === num) {
          results.push(obj.setBackgroundColor(JSColor("#87cefa")));
        } else {
          results.push(void 0);
        }
      }
      return results;
    }
  };

  JSTableView.prototype.deselectRowAtIndexPath = function() {
    var j, len, obj, ref, results;
    if ((this._tableView != null)) {
      ref = this.childlist;
      results = [];
      for (j = 0, len = ref.length; j < len; j++) {
        obj = ref[j];
        results.push(obj.setBackgroundColor(JSColor('clearColor')));
      }
      return results;
    }
  };

  JSTableView.prototype.viewDidAppear = function() {
    var frm;
    JSTableView.__super__.viewDidAppear.call(this);
    if (this._tableView == null) {
      if (this._titleBar == null) {
        this._titleBar = new JSLabel(JSRectMake(0, 0, this._frame.size.width, this._rowHeight));
        this._titleBar.setText(this._title);
        this._titleBar.setTextAlignment("JSTextAlignmentLeft");
        this._titleBar.setTextSize(11);
        this._titleBar.setBackgroundColor(this._titlebarColor);
        this._titleBar.setTextColor(this._titleColor);
        this._titleBar.setAlpha(0.9);
      }
      frm = JSRectMake(0, 0, this._frame.size.width, this._frame.size.height);
      this._tableView = new JSScrollView(frm);
      this._tableView.setBackgroundColor(this._bgColor);
      this._tableView.setAlpha(this._alpha);
      this._tableView.setCornerRadius(this._cornerRadius);
      this._tableView.setBorderColor(this._borderColor);
      this._tableView.setBorderWidth(this._borderWidth);
      this._self.addSubview(this._tableView);
    }
    this.addTableView();
    return this._self.addSubview(this._titleBar);
  };

  return JSTableView;

})(JSView);

JSTextField = (function(superClass) {
  extend(JSTextField, superClass);

  function JSTextField(frame) {
    if (frame == null) {
      frame = JSRectMake(0, 0, 120, 24);
    }
    JSTextField.__super__.constructor.call(this, frame);
    this._textSize = 10;
    this._textColor = JSColor("black");
    this._bgColor = JSColor("#f0f0f0");
    this._textAlignment = "JSTextAlignmentCenter";
    this._text = "";
    this._editable = true;
    this._action = null;
    this._focus = false;
    this._placeholder = "";
    this._formtype = 'text';
  }

  JSTextField.prototype.getText = function() {
    var text;
    if (this._editable === true) {
      text = $(this._viewSelector + "_text").val();
    } else {
      text = this._text;
    }
    return text;
  };

  JSTextField.prototype.setText = function(_text) {
    var disp;
    this._text = _text;
    if (($(this._viewSelector + "_text").length)) {
      if (this._editable === true) {
        return $(this._viewSelector + "_text").val(this._text);
      } else {
        disp = JSEscape(this._text);
        return $(this._viewSelector + "_text").html(disp);
      }
    }
  };

  JSTextField.prototype.setTextSize = function(_textSize) {
    this._textSize = _textSize;
    if (($(this._viewSelector + "_text").length)) {
      return $(this._viewSelector + "_text").css("font-size", this._textSize + "pt");
    }
  };

  JSTextField.prototype.setTextColor = function(_textColor) {
    this._textColor = _textColor;
    if (($(this._viewSelector + "_text").length)) {
      return $(this._viewSelector).css("color", this._textColor);
    }
  };

  JSTextField.prototype.setTextAlignment = function(_textAlignment) {
    this._textAlignment = _textAlignment;
    switch (this._textAlignment) {
      case "JSTextAlignmentCenter":
        return $(this._viewSelector).css("text-align", "center");
      case "JSTextAlignmentLeft":
        return $(this._viewSelector).css("text-align", "left");
      case "JSTextAlignmentRight":
        return $(this._viewSelector).css("text-align", "right");
      default:
        return $(this._viewSelector).css("text-align", "center");
    }
  };

  JSTextField.prototype.setFrame = function(frame) {
    frame.size.width -= 5;
    frame.origin.x += 2;
    JSTextField.__super__.setFrame.call(this, frame);
    $(this._viewSelector + "_text").width(frame.size.width);
    return $(this._viewSelector + "_text").height(frame.size.height);
  };

  JSTextField.prototype.setPlaceholder = function(_placeholder) {
    this._placeholder = _placeholder;
    if (($(this._viewSelector + "_text").length)) {
      return $(this._viewSelector + "_text").attr("placeholder", this._placeholder);
    }
  };

  JSTextField.prototype.setEditable = function(editable) {
    var disp, tag, text, x, y;
    if (!$(this._viewSelector).length) {
      this._editable = editable;
      return;
    }
    if (editable === true) {
      if (this._editable === true) {
        if (!$(this._viewSelector + "_text").length) {
          tag = "<input type='" + this._formtype + "' id='" + this._objectID + "_text' style='position:absolute;z-index:1;height:" + this._frame.size.height + "px;' value='" + this._text + "'>";
        } else {
          this._text = $(this._viewSelector + "_text").val();
          $(this._viewSelector + "_text").remove();
          tag = "<input type='" + this._formtype + "' id='" + this._objectID + "_text' style='position:absolute;z-index:1;height:" + this._frame.size.height + "px;' value='" + this._text + "'>";
        }
      } else {
        disp = JSEscape(this._text);
        tag = "<input type='" + this._formtype + "' id='" + this._objectID + "_text' style='position:absolute;z-index:1;height:" + this._frame.size.height + "px;' value='" + disp + "'>";
      }
      x = -2;
      y = -2;
    } else {
      if (this._editable === true) {
        this._text = $(this._viewSelector + "_text").val();
        text = JSEscape(this._text);
        disp = text.replace(/\n/g, "<br>");
        tag = "<div id='" + this._objectID + "_text' style='position:absolute;z-index:1;overflow:hidden;'>" + disp + "</div>";
      } else {
        if ((this._text != null)) {
          text = JSEscape(this._text);
        } else {
          text = "";
        }
        disp = text.replace(/\n/g, "<br>");
        tag = "<div id='" + this._objectID + "_text' style='position:absolute;z-index:1;overflow:hidden;'>" + disp + "</div>";
      }
      x = 0;
      y = 0;
    }
    this._editable = editable;
    if (($(this._viewSelector + "_text").length)) {
      $(this._viewSelector + "_text").remove();
    }
    $(this._viewSelector).append(tag);
    $(this._viewSelector + "_text").keypress((function(_this) {
      return function(event) {
        if ((_this.action != null)) {
          return _this.action(event.which);
        }
      };
    })(this));
    if (this._editable === true) {
      $(this._viewSelector + "_text").unbind("click").bind("click", (function(_this) {
        return function(event) {
          return event.stopPropagation();
        };
      })(this));
      $(this._viewSelector + "_text").bind("change", (function(_this) {
        return function() {
          return _this._text = $(_this._viewSelector + "_text").val();
        };
      })(this));
    }
    this.setTextSize(this._textSize);
    this.setTextColor(this._textColor);
    this.setTextAlignment(this._textAlignment);
    $(this._viewSelector + "_text").css("left", x);
    $(this._viewSelector + "_text").css("top", y);
    $(this._viewSelector + "_text").width(this._frame.size.width);
    return $(this._viewSelector + "_text").height(this._frame.size.height);
  };

  JSTextField.prototype.setDidKeyPressEvent = function(action1) {
    this.action = action1;
  };

  JSTextField.prototype.setSecureTextEntry = function(flag) {
    this._formtype = flag ? 'password' : 'text';
    return this.setEditable(this._editable);
  };

  JSTextField.prototype.getSecureTextEntry = function() {
    if (this._formtype === 'password') {
      return true;
    } else {
      return false;
    }
  };

  JSTextField.prototype.setFocus = function(_focus) {
    this._focus = _focus;
    if (!$(this._viewSelector + "_text").length) {
      return;
    }
    if (this._focus === true) {
      return $(this._viewSelector + "_text").focus();
    } else {
      return $(this._viewSelector + "_text").blur();
    }
  };

  JSTextField.prototype.viewDidAppear = function() {
    JSTextField.__super__.viewDidAppear.call(this);
    this.setEditable(this._editable);
    $(this._viewSelector).css("vertical-align", "middle");
    $(this._viewSelector + "_text").width(this._frame.size.width);
    this.setTextSize(this._textSize);
    this.setTextColor(this._textColor);
    this.setTextAlignment(this._textAlignment);
    this.setPlaceholder(this._placeholder);
    return $(this._viewSelector).css("overflow", "");
  };

  return JSTextField;

})(JSControl);

JSTextView = (function(superClass) {
  extend(JSTextView, superClass);

  function JSTextView(frame) {
    this.animateWithDuration = bind(this.animateWithDuration, this);
    JSTextView.__super__.constructor.call(this, frame);
    this._editable = true;
    this._textSize = 8;
    this._textColor = JSColor("black");
    this._bgColor = JSColor("white");
    this._borderColor = JSColor("clearColor");
    this._borderWidth = 0;
    this._textAlignment = "JSTextAlignmentLeft";
    this._text = "";
    this._writingMode = 0;
    this._lineHeight = 1.0;
    this._fontFamily = "gothic";
    this._placeholder = "";
    this._textVerticalAlignment = "JSTextVerticalAlignmentTop";
  }

  JSTextView.prototype.setWritingMode = function(_writingMode) {
    this._writingMode = _writingMode;
    this._editable = false;
    return this.setEditable(this._editable);
  };

  JSTextView.prototype.getText = function() {
    var text;
    if (this._editable === true) {
      text = $(this._viewSelector + "_textarea").val();
    } else {
      text = this._text;
    }
    return text;
  };

  JSTextView.prototype.setText = function(text) {
    var disp, writingmode;
    this._text = text.replace(/<br>/g, "\n");
    if (($(this._viewSelector + "_textarea").length)) {
      if (this._writingMode === 0) {
        writingmode = "horizontal-tb";
      } else {
        writingmode = "vertical-rl";
      }
      $(this._viewSelector + "_textarea").css("-webkit-writing-mode", writingmode);
      if (this._editable === true) {
        $(this._viewSelector + "_textarea").val(this._text);
      } else {
        disp = this._text.replace(/\n/g, "<br>");
        $(this._viewSelector + "_textarea").html(disp);
      }
      return this.setFrame(this._frame);
    }
  };

  JSTextView.prototype.setFocus = function() {
    return setTimeout((function(_this) {
      return function() {
        return $(_this._viewSelector + "_textarea").focus();
      };
    })(this), 0);
  };

  JSTextView.prototype.setTextSize = function(_textSize) {
    this._textSize = _textSize;
    if (($(this._viewSelector + "_textarea").length)) {
      return $(this._viewSelector + "_textarea").css("font-size", this._textSize + "pt");
    }
  };

  JSTextView.prototype.setTextColor = function(_textColor) {
    this._textColor = _textColor;
    if (($(this._viewSelector + "_textarea").length)) {
      return $(this._viewSelector + "_textarea").css("color", this._textColor);
    }
  };

  JSTextView.prototype.setFrame = function(frame) {
    JSTextView.__super__.setFrame.call(this, frame);
    if (($(this._viewSelector + "_textarea").length)) {
      $(this._viewSelector + "_textarea").width(frame.size.width);
      return $(this._viewSelector + "_textarea").height(frame.size.height);
    }
  };

  JSTextView.prototype.animateWithDuration = function(duration, animations, completion) {
    var animobj, key, results, value;
    if (completion == null) {
      completion = null;
    }
    JSTextView.__super__.animateWithDuration.call(this, duration, animations, completion);
    animobj = {};
    results = [];
    for (key in animations) {
      value = animations[key];
      if (key === "width") {
        results.push($(this._viewSelector + "_textarea").css('width', value));
      } else if (key === "height") {
        results.push($(this._viewSelector + "_textarea").css('height', value));
      } else {
        results.push(void 0);
      }
    }
    return results;
  };

  JSTextView.prototype.setPlaceholder = function(_placeholder) {
    this._placeholder = _placeholder;
    if (($(this._viewSelector + "_textarea").length)) {
      return $(this._viewSelector + "_textarea").attr("placeholder", this._placeholder);
    }
  };

  JSTextView.prototype.setEditable = function(editable) {
    var disp, tag, text, writingmode, x, y;
    if (!$(this._viewSelector).length) {
      this._editable = editable;
      return;
    }
    if (editable === true) {
      this.setUserInteractionEnabled(true);
      if (this._editable === true) {
        if (!$(this._viewSelector + "_textarea").length) {
          tag = "<textarea id='" + this._objectID + "_textarea' style='position:absolute;overflow:auto;word-break:break-all;z-index:1;'>" + this._text + "</textarea>";
        } else {
          this._text = $(this._viewSelector + "_textarea").val();
          return;
        }
      } else {
        tag = "<textarea id='" + this._objectID + "_textarea' style='position:absolute;overflow:auto;word-break:break-all;z-index:1;'>" + this._text + "</textarea>";
      }
      x = -2;
      y = -2;
    } else {
      if (this._editable === true) {
        this._text = $(this._viewSelector + "_textarea").val();
        text = JSEscape(this._text);
        disp = text.replace(/\n/g, "<br>");
      } else {
        text = JSEscape(this._text);
        disp = text.replace(/\n/g, "<br>");
      }
      tag = "<div id='" + this._objectID + "_textarea' style='overflow:hidden;word-break:break-all;z-index:1;display:table-cell; vertical-align:middle;'>" + disp + "</div>";
      x = 0;
      y = 0;
    }
    this._editable = editable;
    if (($(this._viewSelector + "_textarea").length)) {
      $(this._viewSelector + "_textarea").remove();
    }
    $(this._viewSelector).append(tag);
    if (this._writingMode === 0) {
      writingmode = "horizontal-tb";
    } else {
      writingmode = "vertical-rl";
      $(this._viewSelector + "_textarea").css("position", "absolute");
    }
    $(this._viewSelector + "_textarea").css("-webkit-writing-mode", writingmode);
    $(this._viewSelector + "_textarea").css("background-color", JSColor("clearColor"));
    $(this._viewSelector + "_textarea").css("border", "none");
    if (this._editable === true) {
      $(this._viewSelector + "_textarea").unbind("click").bind("click", (function(_this) {
        return function(event) {
          return event.stopPropagation();
        };
      })(this));
      $(this._viewSelector + "_textarea").bind("change", (function(_this) {
        return function() {
          return _this._text = $(_this._viewSelector + "_textarea").val();
        };
      })(this));
    } else {
      $(this._viewSelector + "_textarea").unbind("click");
    }
    this.setTextSize(this._textSize);
    this.setTextColor(this._textColor);
    this.setTextAlignment(this._textAlignment);
    this.setTextVerticalAlignment(this._textVerticalAlignment);
    $(this._viewSelector + "_textarea").css("left", x);
    $(this._viewSelector + "_textarea").css("top", y);
    $(this._viewSelector + "_textarea").width(this._frame.size.width);
    return $(this._viewSelector + "_textarea").height(this._frame.size.height);
  };

  JSTextView.prototype.setTextAlignment = function(_textAlignment) {
    this._textAlignment = _textAlignment;
    if (!$(this._viewSelector + "_textarea").length) {
      return;
    }
    switch (this._textAlignment) {
      case "JSTextAlignmentCenter":
        return $(this._viewSelector + "_textarea").css("text-align", "center");
      case "JSTextAlignmentLeft":
        return $(this._viewSelector + "_textarea").css("text-align", "left");
      case "JSTextAlignmentRight":
        return $(this._viewSelector + "_textarea").css("text-align", "right");
      default:
        return $(this._viewSelector + "_textarea").css("text-align", "center");
    }
  };

  JSTextView.prototype.setTextVerticalAlignment = function(_textVerticalAlignment) {
    this._textVerticalAlignment = _textVerticalAlignment;
    if (!$(this._viewSelector + "_textarea").length) {
      return;
    }
    switch (this._textVerticalAlignment) {
      case "JSTextVerticalAlignmentTop":
        return $(this._viewSelector + "_textarea").css("vertical-align", "top");
      case "JSTextVerticalAlignmentMiddle":
        return $(this._viewSelector + "_textarea").css("vertical-align", "middle");
      case "JSTextVerticalAlignmentBottom":
        return $(this._viewSelector + "_textarea").css("vertical-align", "bottom");
      default:
        return $(this._viewSelector + "_textarea").css("vertical-align", "middle");
    }
  };

  JSTextView.prototype.setTextLineHeight = function(_lineHeight) {
    this._lineHeight = _lineHeight;
    if (($(this._viewSelector + "_textarea").length)) {
      return $(this._viewSelector + "_textarea").css("line-height", this._lineHeight);
    }
  };

  JSTextView.prototype.setTextFontFamily = function(_fontFamily) {
    this._fontFamily = _fontFamily;
    if (($(this._viewSelector + "_textarea").length)) {
      switch (this._fontFamily) {
        case "mincho":
          return $(this._viewSelector + "_textarea").css("font-family", "'Hiragino Mincho ProN', serif;");
        case "gothic":
          return $(this._viewSelector + "_textarea").css("font-family", "'Hiragino Maru Gothic Pro W4', 'sans-serif';");
      }
    }
  };

  JSTextView.prototype.viewDidAppear = function() {
    JSTextView.__super__.viewDidAppear.call(this);
    this.setEditable(this._editable);
    this.setTextSize(this._textSize);
    this.setTextColor(this._textColor);
    this.setTextAlignment(this._textAlignment);
    this.setTextVerticalAlignment(this._textVerticalAlignment);
    this.setTextLineHeight(this._lineHeight);
    this.setTextFontFamily(this._fontFamily);
    this.setPlaceholder(this._placeholder);
    if (this._editable === true) {
      return $(this._viewSelector + "_textarea").unbind("click").bind("click", (function(_this) {
        return function(event) {
          return event.stopPropagation();
        };
      })(this));
    } else {
      return $(this._viewSelector + "_textarea").unbind("click");
    }
  };

  return JSTextView;

})(JSScrollView);

JSWebView = (function(superClass) {
  extend(JSWebView, superClass);

  function JSWebView(frame) {
    JSWebView.__super__.constructor.call(this, frame);
    this.scalesPageToFit = false;
    this.loading = false;
    this._request = void 0;
  }

  JSWebView.prototype.destructor = function() {
    return JSWebView.__super__.destructor.call(this);
  };

  JSWebView.prototype.reload = function() {
    return this.loadRequest(this._request);
  };

  JSWebView.prototype.loadRequest = function(_request) {
    this._request = _request;
    $(this._viewSelector + "_webview").remove();
    return this.viewDidAppear();
  };

  JSWebView.prototype.setCornerRadius = function(cornerradius) {
    JSWebView.__super__.setCornerRadius.call(this, cornerradius);
    return $(this._viewSelector + "_webview").css("border-radius", cornerradius + "px");
  };

  JSWebView.prototype.viewDidAppear = function() {
    var tag;
    JSWebView.__super__.viewDidAppear.call(this);
    tag = "<div id='" + this._objectID + "_webview' style='position:absolute; overflow:hidden; width:" + this._frame.size.width + "px; height:" + this._frame.size.height + "px; border-radius:" + this._cornerRadius + "px;'>";
    if ((this._request != null)) {
      tag += "<iframe src='" + this._request + "' style='position:absolute; width:" + this._frame.size.width + "px; height:" + this._frame.size.height + "px;'></iframe>";
    }
    tag += "</div>";
    return $(this._viewSelector).append(tag);
  };

  return JSWebView;

})(JSScrollView);
